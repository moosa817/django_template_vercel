{% extends 'main.html' %}
{% load widget_tweaks %}

{%block content%}

<div class="flex items-center justify-center flex-col mt-5">


    <div class=" dark:bg-gray-800 bg-gray-200 rounded-lg shadow-2xl mt-10">
        <h1
            class="my-5 font-bold text-center text-transparent text-3xl bg-clip-text bg-gradient-to-r from-green-800 to-primary-glow-green mt-10">
            Forgot Password
        </h1>

        <form action="" method="POST" class="mt-4 w-[85vw] md:w-[50vw] px-4 md:px-24 py-10 ">
            {%csrf_token%}

            {%if type == 'email' %}


            <label for="email" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">Email or
                Username</label>


            <div class="relative w-full">

                <input required class="appearance-none control-form font-mono js-password" type="text" name="uemail"
                    placeholder="Enter Your Account's Email or username" autocomplete="off" />
            </div>

            <button type="submit"
                class="text-white bg-gradient-to-r w-full to-primary-glow-green from-green-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-primary-glow-green dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-2 hover:scale-105 ">Send
                Email
            </button>


            {%endif%}
            {% if type == 'code' %}



            <label for="code" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">Code (Enter Code
                sent to {{blur_email}})</label>
            <div class="text-center my-2">
                <a href="?resend=True" class="text-xs text-center text-blue-500 underline">
                    Resend Or Change Email
                </a>
            </div>

            <div class="relative w-full">
                <div class="js-password-toggle absolute inset-y-0 right-0 flex items-center px-2">
                    <label class=" rounded px-2 py-1 text-sm text-gray-600 font-mono cursor-pointer js-password-label"
                        for="toggle">
                        <svg class="w-5 eye-show" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.0007 12C15.0007 13.6569 13.6576 15 12.0007 15C10.3439 15 9.00073 13.6569 9.00073 12C9.00073 10.3431 10.3439 9 12.0007 9C13.6576 9 15.0007 10.3431 15.0007 12Z"
                                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                                d="M12.0012 5C7.52354 5 3.73326 7.94288 2.45898 12C3.73324 16.0571 7.52354 19 12.0012 19C16.4788 19 20.2691 16.0571 21.5434 12C20.2691 7.94291 16.4788 5 12.0012 5Z"
                                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>

                    </label>
                </div>
                <input class="appearance-none control-form font-mono js-password" type="password" name="code"
                    placeholder="Enter Code" autocomplete="off" />
            </div>

            <button type="submit"
                class="text-white bg-gradient-to-r w-full to-primary-glow-green from-green-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-primary-glow-green dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-2 hover:scale-105 ">Enter
                Code
            </button>









            {%endif%}


            {%if type == 'changepwd' %}

            <div class="text-center my-2">
                <a href="?resend=True" class="text-xs text-center text-blue-500 underline">
                    Resend Or Change Email
                </a>
            </div>

            <label for="password" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">New
                Password</label>

            <div class="relative w-full">
                <div class="js-password-toggle absolute inset-y-0 right-0 flex items-center px-2">
                    <label class=" rounded px-2 py-1 text-sm text-gray-600 font-mono cursor-pointer js-password-label"
                        for="toggle">
                        <svg class="w-5 eye-show" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.0007 12C15.0007 13.6569 13.6576 15 12.0007 15C10.3439 15 9.00073 13.6569 9.00073 12C9.00073 10.3431 10.3439 9 12.0007 9C13.6576 9 15.0007 10.3431 15.0007 12Z"
                                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                                d="M12.0012 5C7.52354 5 3.73326 7.94288 2.45898 12C3.73324 16.0571 7.52354 19 12.0012 19C16.4788 19 20.2691 16.0571 21.5434 12C20.2691 7.94291 16.4788 5 12.0012 5Z"
                                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>

                    </label>
                </div>
                <input class="appearance-none control-form font-mono js-password" id="password1" type="password"
                    name="password1" placeholder="Enter Your New Password" autocomplete="off" />
            </div>

            <label for="password" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">Confirm Your
                New Password</label>

            <div class="relative w-full">
                <div class="js-password-toggle absolute inset-y-0 right-0 flex items-center px-2">
                    <label class=" rounded px-2 py-1 text-sm text-gray-600 font-mono cursor-pointer js-password-label"
                        for="toggle">
                        <svg class="w-5 eye-show" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.0007 12C15.0007 13.6569 13.6576 15 12.0007 15C10.3439 15 9.00073 13.6569 9.00073 12C9.00073 10.3431 10.3439 9 12.0007 9C13.6576 9 15.0007 10.3431 15.0007 12Z"
                                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                                d="M12.0012 5C7.52354 5 3.73326 7.94288 2.45898 12C3.73324 16.0571 7.52354 19 12.0012 19C16.4788 19 20.2691 16.0571 21.5434 12C20.2691 7.94291 16.4788 5 12.0012 5Z"
                                stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>

                    </label>
                </div>
                <input class="appearance-none control-form font-mono js-password" id="password2" type="password"
                    name="password2" placeholder="Confirm New Password" autocomplete="off" />
            </div>

            <button type="submit"
                class="text-white bg-gradient-to-r w-full to-primary-glow-green from-green-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-primary-glow-green dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-2 hover:scale-105 ">Change
                Password
            </button>

            {%endif%}
            <div class="text-center mb-10 text-sm opacity-90">
                Don't Have an Account?<a href="{% url 'register' %}" class="font-semibold text-blue-400">Register</a>
            </div>



            {% if messages %}
            {% for message in messages %}
            <div class="text-red-600 text-semibold text-center">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}

        </form>

    </div>


    <script>

        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }



    </script>


    {%endblock%}
